import{j as e,a2 as t,m as r,A as a,o as s,am as n,Y as o}from"./ui-libs-CSr-Z6f1.js";import{r as i}from"./react-vendor-Bmnvhqav.js";import{c as l,u as d,D as c,S as u,d as m,e as g,f as x,h,i as p,g as b,A as f,P as y,I as w,j as v,k as j,l as k,m as N,M as C,R as T}from"./index-r-RDjiyz.js";import{F as S}from"./data-libs-DQyM0wFE.js";import"./supabase-X-pkD9a7.js";import"./pdf-utils-CIzaveRM.js";const A=({children:a,delay:s=0,index:n,onMouseEnter:o,onClick:l})=>{const d=i.useRef(null),c=t(d,{amount:.5});return e.jsx(r.div,{ref:d,"data-index":n,onMouseEnter:o,onClick:l,initial:{scale:.7,opacity:0},animate:c?{scale:1,opacity:1}:{scale:.7,opacity:0},transition:{duration:.2,delay:s},style:{marginBottom:"1rem",cursor:"pointer"},children:a})},q=({items:t=[],onItemSelect:r,showGradients:a=!0,enableArrowNavigation:s=!0,className:n="",itemClassName:o="",displayScrollbar:l=!0,initialSelectedIndex:d=-1,selectedItems:c=new Set,disabled:u=!1})=>{const m=i.useRef(null),[g,x]=i.useState(d),[h,p]=i.useState(-1),[b,f]=i.useState(!1),[y,w]=i.useState(0),[v,j]=i.useState(1),[k,N]=i.useState(!1),[C,T]=i.useState(10),[S,q]=i.useState(!1);i.useEffect(()=>{const e=()=>{q(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),i.useEffect(()=>{T(10)},[t]),i.useEffect(()=>{x(d)},[d]);const I=S?t.slice(0,C):t,E=S&&C<t.length;return i.useEffect(()=>{if(!s||!k)return;const e=e=>{"ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey?(e.preventDefault(),f(!0),p(e=>Math.min(e+1,t.length-1))):"ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey?(e.preventDefault(),f(!0),p(e=>Math.max(e-1,0))):"Enter"===e.key&&h>=0&&h<t.length&&(e.preventDefault(),x(h),r&&r(t[h],h))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,h,r,s,k]),i.useEffect(()=>{if(!b||h<0||!m.current)return;const e=m.current,t=e.querySelector(`[data-index="${h}"]`);if(t){const r=50,a=e.scrollTop,s=e.clientHeight,n=t.offsetTop,o=n+t.offsetHeight;n<a+r?e.scrollTo({top:n-r,behavior:"smooth"}):o>a+s-r&&e.scrollTo({top:o-s+r,behavior:"smooth"})}f(!1)},[h,b]),e.jsxs("div",{className:`scroll-list-container ${n}`,children:[e.jsxs("div",{ref:m,className:"scroll-list "+(l?"":"no-scrollbar"),onScroll:e=>{const{scrollTop:t,scrollHeight:r,clientHeight:a}=e.target;w(Math.min(t/50,1));const s=r-(t+a);j(r<=a?0:Math.min(s/50,1))},onFocus:()=>N(!0),onBlur:()=>N(!1),onMouseEnter:()=>N(!0),onMouseLeave:()=>{N(!1),p(-1)},tabIndex:0,children:[I.map((t,a)=>{const s=c.has(a);return e.jsx(A,{delay:.1,index:a,onMouseEnter:()=>!u&&p(a),onClick:()=>{u||(x(a),r&&r(t,a))},children:e.jsx("div",{className:`item ${g===a?"selected":""} ${h===a?"hovered":""} ${s?"bulk-selected":""} ${o}`,children:e.jsx("p",{className:"item-text",children:t})})},a)}),E&&e.jsxs("div",{className:"flex flex-col gap-2 mt-4 p-2",children:[e.jsxs("button",{onClick:()=>{T(e=>Math.min(e+10,t.length))},className:"w-full px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors duration-200 text-sm",children:["Load More Questions (",Math.min(10,t.length-C)," more)"]}),e.jsxs("button",{onClick:()=>{T(t.length)},className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-200 text-xs",children:["Show All (",t.length," total)"]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"top-gradient",style:{opacity:y}}),e.jsx("div",{className:"bottom-gradient",style:{opacity:v}})]})]})},I=({children:t,onClick:l,className:d="",type:c="button",variant:u="primary",successMessage:m,disabled:g=!1})=>{const[x,h]=i.useState(!1),[p,b]=i.useState(!1),[f,y]=i.useState("");return e.jsx(r.button,{type:c,onClick:async e=>{if(g||x)return;h(!0);const t="function"==typeof m?m():m||"Success!";y(t);try{await l(e),b(!0),setTimeout(()=>{b(!1),h(!1),y("")},1500)}catch(r){h(!1),y("")}},disabled:g||x,className:`\n        relative overflow-hidden px-6 py-2 rounded-lg font-medium transition-all duration-200\n        ${(()=>{switch(u){case"primary":default:return"bg-blue-600 hover:bg-blue-700 text-white";case"danger":return"bg-red-600 hover:bg-red-700 text-white";case"success":return"bg-green-600 hover:bg-green-700 text-white"}})()}\n        ${g?"opacity-50 cursor-not-allowed":""}\n        ${d}\n      `,whileHover:g||x?{}:{scale:1.02},whileTap:g||x?{}:{scale:.98},children:e.jsx(a,{mode:"wait",children:p?e.jsxs(r.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{type:"spring",stiffness:500,damping:30},className:"flex items-center justify-center space-x-2",children:[(()=>{switch(u){case"danger":return e.jsx(o,{className:"w-4 h-4"});case"primary":return e.jsx(n,{className:"w-4 h-4"});default:return e.jsx(s,{className:"w-4 h-4"})}})(),e.jsx("span",{children:f})]},"success"):x?e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center space-x-2",children:[e.jsx(r.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]},"loading"):e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center space-x-2",children:t},"default")})})},E=(e="",t="")=>{const r=e.length,a=t.length;if(0===r)return a;if(0===a)return r;const s=Array.from({length:r+1},()=>new Array(a+1));for(let n=0;n<=r;n++)s[n][0]=n;for(let n=0;n<=a;n++)s[0][n]=n;for(let n=1;n<=r;n++)for(let r=1;r<=a;r++){const a=e[n-1]===t[r-1]?0:1;s[n][r]=Math.min(s[n-1][r]+1,s[n][r-1]+1,s[n-1][r-1]+a)}return s[r][a]},M=(e,t,r=.45)=>{const a=(e||"").toLowerCase().replace(/[^a-z\s&+/]/g,"").trim();let s=null,n=0;for(const o of t){const e=1-E(a,o.toLowerCase())/Math.max(a.length||1,o.length);e>n&&(n=e,s=o)}return n>=r?s:null},L=({questions:t,loading:r=!1,onAddQuestion:a,onUpdateQuestion:s,onDeleteQuestion:n,onBulkDeleteQuestions:o})=>{const A=Array.isArray(t)?t:[],{user:E}=l(),{isDarkMode:L}=d(),[D,$]=i.useState({show:!1,points:0,action:""}),[B,P]=i.useState(null),[Q,W]=i.useState(null),[z,O]=i.useState({section:u.READING_WRITING,domain:"",questionType:"",passageText:"",passageImage:null,questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM}),[R,F]=i.useState(null),[H,_]=i.useState(null),[U,V]=i.useState("All Sections"),[G,Y]=i.useState(""),[K,J]=i.useState({}),[X,Z]=i.useState(!1),[ee,te]=i.useState(""),[re,ae]=i.useState(""),[se,ne]=i.useState(!1),[oe,ie]=i.useState(!1),[le,de]=i.useState(!1),[ce,ue]=i.useState(!1),[me,ge]=i.useState(!1),xe=i.useRef(null),[he,pe]=i.useState([]),[be,fe]=i.useState(0),[ye,we]=i.useState(!1),[ve,je]=i.useState({total:0,completed:0}),[ke,Ne]=i.useState(!1),[Ce,Te]=i.useState(!1),[Se,Ae]=i.useState([]),[qe,Ie]=i.useState({}),[Ee,Me]=i.useState(new Set),[Le,De]=i.useState(!1),[$e,Be]=i.useState(!1),[Pe,Qe]=i.useState(-1),[We,ze]=i.useState(new Date),[Oe,Re]=i.useState({isOpen:!1,imageSrc:"",imageAlt:""});i.useEffect(()=>{},[Se]),i.useEffect(()=>{const e=setInterval(()=>{ze(new Date)},6e4);return()=>clearInterval(e)},[]),i.useEffect(()=>{const e=new Audio(m);e.volume=.4,P(e);const t=new Audio(g);return t.volume=.4,W(t),()=>{e&&e.pause(),t&&t.pause()}},[]),i.useEffect(()=>{const e=e=>{xe.current&&!xe.current.contains(e.target)&&ge(!1)};return me&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[me]);const Fe=async(e,t={})=>{if(E?.id)try{const r=await N(E.id,e,t);r.success&&0!==r.pointsAwarded&&$({show:!0,points:r.pointsAwarded,action:e})}catch(r){}},He=(e,t)=>{O(r=>{const a={...r,[e]:t};return"domain"===e&&(a.questionType=""),a}),K[e]&&J(t=>({...t,[e]:!1}))},_e=async e=>{e.preventDefault();const t=(()=>{if(!z.section||!z.domain||!z.questionType)return!1;const e=!z.passageText||""===z.passageText.trim(),t=!z.passageImage,r=!z.questionText||""===z.questionText.trim(),a=!z.explanation||""===z.explanation.trim(),s=!z.answerChoices||Object.values(z.answerChoices).every(e=>!e||""===e.trim());return e&&t&&r&&a&&s})(),r={};if(z.section||(r.section=!0),z.section!==u.MATH&&(z.domain||(r.domain=!0),z.questionType||(r.questionType=!0)),!t)if(z.passageText.trim()||z.passageImage||(r.passageText=!0),z.section===u.MATH||z.questionText.trim()||(r.questionText=!0),z.section===u.MATH){["A","B","C","D"].forEach((e,t)=>{z.answerChoices[e]&&""!==z.answerChoices[e].trim()||(z.answerChoices[e]=e)})}else{const e=Object.entries(z.answerChoices).filter(([e,t])=>!t.trim()).map(([e])=>e);e.length>0&&e.forEach(e=>{r[`answerChoice_${e}`]=!0})}if(Object.keys(r).length>0)throw J(r),new Error("Validation failed");J({}),R?(s(R,z),j(),B&&(B.currentTime=0,B.play().catch(e=>{})),Fe("EDIT_QUESTION").catch(e=>{}),F(null),_(null),Qe(-1)):(a(z),B&&(B.currentTime=0,B.play().catch(e=>{})),Fe("ADD_QUESTION").catch(e=>{})),ye||O({section:z.section,domain:"",questionType:"",passageText:"",passageImage:null,questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM})},Ue={includeScore:!0,shouldSort:!1,threshold:.3,ignoreLocation:!0,minMatchCharLength:2,keys:[{name:"section",weight:.3},{name:"domain",weight:.3},{name:"questionType",weight:.3},{name:"difficulty",weight:.3},{name:"correctAnswer",weight:.4},{name:"questionText",weight:.2},{name:"passageText",weight:.15},{name:"answerChoices.A",weight:.05},{name:"answerChoices.B",weight:.05},{name:"answerChoices.C",weight:.05},{name:"answerChoices.D",weight:.05},{name:"explanation",weight:.05}]};i.useMemo(()=>new S(A,Ue),[A]);const Ve=i.useMemo(()=>{let e=[...t];const r=G.trim().toLowerCase();r.includes("hidden")||(e=e.filter(e=>!e.hidden)),r&&(e=e.filter(e=>[e.section,e.domain,e.questionType,e.questionText,e.explanation,e.hidden?"hidden":""].join(" ").toLowerCase().includes(r)));const a=e=>{const t=e.createdAt||e.date||e.lastUpdated||0,r=new Date(t).getTime();return Number.isNaN(r)?0:r};return e.sort((e,t)=>{const r=a(t)-a(e);return 0!==r?r:"number"==typeof t.id&&"number"==typeof e.id?t.id-e.id:0})},[t,G]),Ge=i.useMemo(()=>Ve.map(e=>{const t=(e.passageText||"").trim().split(/\s+/),r=t.slice(0,5).join(" "),a=r&&r.length>0?`${r}${t.length>5?"...":""}`:"No passage text",s=e.hidden?" 🔒":"",n=e.createdAt||e.lastUpdated?` • ${x(e.createdAt||e.lastUpdated)}`:"";return`${e.section} | ${a}${s}${n}`}),[Ve,We]),Ye=e=>{const t=new Set(Ee);t.has(e)?t.delete(e):t.add(e),Me(t)},Ke=e=>{try{const t=(e=>{const t=[];let r="",a=!1;for(let s=0;s<e.length;s++){const n=e[s];'"'===n?a=!a:","!==n||a?r+=n:(t.push(r.trim()),r="")}return t.push(r.trim()),t.map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e)})(e);if(t.length<3)throw new Error(`CSV must have at least 3 fields for hidden questions or 11+ fields for complete questions. Found ${t.length} fields.`);const r=t[0],a=t[1],s=t[2],n=(e=>{const t=Object.values(u);return M(e,t,.3)||u.READING_WRITING})(r),o=((e,t)=>{const r=t===u.MATH?Object.values(C):[...Object.values(T),...Object.values(C)];return M(e,r,.35)||(t===u.MATH?"Algebra":"Information and Ideas")})(a,n),i=(e=>{const t={"main idea":"Main Idea",inference:"Inferences",inferences:"Inferences","supporting evidence":"Supporting Evidence",detail:"Detail","central ideas and details":"Central Ideas and Details","command of evidence":"Command of Evidence","words in context":"Words in Context","text structure":"Text Structure","text structure and purpose":"Text Structure and Purpose",purpose:"Purpose","cross-text connections":"Cross-Text Connections","structure and purpose":"Structure and Purpose","rhetorical synthesis":"Rhetorical Synthesis",transitions:"Transitions",conciseness:"Conciseness",precision:"Precision","modifier placement":"Modifier Placement","logical comparison":"Logical Comparison",punctuation:"Punctuation","sentence boundaries":"Sentence Boundaries","verb tense and agreement":"Verb Tense and Agreement","pronouns and modifiers":"Pronouns and Modifiers","punctuation usage":"Punctuation Usage",boundaries:"Boundaries","form structure and sense":"Form, Structure, and Sense","linear equations":"Linear equations in one variable","linear functions":"Linear functions","linear equations in two variables":"Linear equations in two variables","systems of two linear equations in two variables":"Systems of two linear equations in two variables","linear inequalities in one or two variables":"Linear inequalities in one or two variables",inequalities:"Linear inequalities in one or two variables","systems of equations":"Systems of two linear equations in two variables","linear/quadratic equations":"Linear equations in one variable",quadratics:"Nonlinear functions","rational expressions":"Equivalent expressions","radical equations":"Nonlinear equations in one variable and systems of equations in two variables",functions:"Nonlinear functions","nonlinear functions":"Nonlinear functions","nonlinear equations":"Nonlinear equations in one variable and systems of equations in two variables","equivalent expressions":"Equivalent expressions","ratios and proportions":"Ratios, rates, proportional relationships, and units","unit conversions":"Ratios, rates, proportional relationships, and units","data interpretation":"One-variable data: Distributions and measures of center and spread",statistics:"One-variable data: Distributions and measures of center and spread",percentages:"Percentages",probability:"Probability and conditional probability",scatterplots:"Two-variable data: Models and scatterplots","inference from sample statistics":"Inference from sample statistics and margin of error","evaluating statistical claims":"Evaluating statistical claims: Observational studies and experiments",angles:"Lines, angles, and triangles",circles:"Circles","area/volume":"Area and volume","trigonometric functions":"Right triangles and trigonometry",geometry:"Lines, angles, and triangles",trigonometry:"Right triangles and trigonometry","right triangles":"Right triangles and trigonometry","lines angles and triangles":"Lines, angles, and triangles","area and volume":"Area and volume",linear:"Linear equations in one variable",quadratic:"Nonlinear functions",ratio:"Ratios, rates, proportional relationships, and units",proportion:"Ratios, rates, proportional relationships, and units",data:"One-variable data: Distributions and measures of center and spread",statistical:"One-variable data: Distributions and measures of center and spread",geometric:"Lines, angles, and triangles",trig:"Right triangles and trigonometry",trigonometric:"Right triangles and trigonometry",word:"Words in Context",context:"Words in Context",sentence:"Boundaries",boundary:"Boundaries",verb:"Form, Structure, and Sense",agreement:"Form, Structure, and Sense",pronoun:"Form, Structure, and Sense",modifier:"Form, Structure, and Sense",transition:"Transitions",synthesis:"Rhetorical Synthesis",rhetorical:"Rhetorical Synthesis",main:"Main Idea",idea:"Main Idea",evidence:"Supporting Evidence",supporting:"Supporting Evidence",structure:"Text Structure",text:"Text Structure",cross:"Cross-Text Connections",connection:"Cross-Text Connections","command evidence":"Command of Evidence"},r=((e="")=>e.replace(/[\u0000-\u001F\u007F-\u009F]/g,"").replace(/\s+/g," ").trim())(e).toLowerCase().replace(/[^a-z\s-]/g,"").trim();if(t[r])return t[r];if(r.endsWith("s")){const e=r.slice(0,-1);if(t[e])return t[e]}if(r.includes("command of evidence"))return"Command of Evidence";if(r.includes("text structure")&&r.includes("purpose"))return"Text Structure and Purpose";if(r.includes("cross-text"))return"Cross-Text Connections";if(r.includes("central ideas"))return"Central Ideas and Details";if(r.includes("words in context"))return"Words in Context";if(r.includes("inference"))return"Inference";const a=[...new Set(Object.values(t))];return M(r,a,.3)||"Words in Context"})(s);if(3===t.length)return{section:n,domain:o,questionType:i,passageText:"",questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM};if(t.length<11)throw new Error(`CSV must have at least 11 fields for complete questions. Found ${t.length} fields.`);const[,,,l,d,m,g,x,h,p,b,f]=t,y={easy:"Easy",ez:"Easy",eazy:"Easy",easyyy:"Easy",medium:"Medium",med:"Medium",meh:"Medium",hard:"Hard",hrd:"Hard",difficult:"Hard"}[(f||"").toLowerCase().replace(/[^a-z]/g,"").trim()]||"Medium",w=(p||"A").toUpperCase().replace(/[^ABCD]/g,"A");let v=l||"",j=null;const k="[IMAGE_DATA]",N="[/IMAGE_DATA]";if(v.includes(k)&&v.includes(N)){const e=v.indexOf(k),t=v.indexOf(N)+N.length,r=v.substring(e,t).replace(k,"").replace(N,"");r.startsWith("data:image/")&&(j=r),v=v.substring(0,e)+v.substring(t),v=v.trim()}let S=b||"",A=null;if(S.includes(k)&&S.includes(N)){const e=S.indexOf(k),t=S.indexOf(N)+N.length,r=S.substring(e,t).replace(k,"").replace(N,"");r.startsWith("data:image/")&&(A=r),S=S.substring(0,e)+S.substring(t),S=S.trim()}return{section:n,domain:o,questionType:i,passageText:v,passageImage:j,questionText:d||"",answerChoices:{A:m||"",B:g||"",C:x||"",D:h||""},correctAnswer:w,explanation:S,explanationImage:A,difficulty:y}}catch(t){throw new Error(`CSV parsing error: ${t.message}`)}},Je=async()=>{if(!$e)try{const e=(()=>{if(!z.section||!z.domain||!z.questionType)return!1;const e=!z.passageText||""===z.passageText.trim(),t=!z.passageImage,r=!z.questionText||""===z.questionText.trim(),a=!z.explanation||""===z.explanation.trim(),s=Object.values(z.answerChoices).every(e=>!e||""===e.trim());return e&&t&&r&&a&&s})(),t={};if(z.section||(t.section=!0),z.domain||(t.domain=!0),z.questionType||(t.questionType=!0),!e)if(z.passageText.trim()||z.passageImage||(t.passageText=!0),z.section===u.MATH||z.questionText.trim()||(t.questionText=!0),z.section===u.MATH){["A","B","C","D"].forEach((e,t)=>{z.answerChoices[e]&&""!==z.answerChoices[e].trim()||(z.answerChoices[e]=e)})}else{const e=Object.entries(z.answerChoices).filter(([e,t])=>!t.trim()).map(([e])=>e);e.length>0&&e.forEach(e=>{t[`answerChoice_${e}`]=!0})}if(Object.keys(t).length>0)return void J(t);J({}),Ie(e=>({...e,[be]:{...z}}));const r=be+1;if(r<he.length){Ae(e=>[...e,{...z}]),fe(r);const e=qe[r]||he[r];O(e),je(e=>({...e,completed:e.completed+1}))}else Be(!0),Ae(e=>{const t=[...e,{...z}];return a(t),we(!1),pe([]),fe(0),je({total:0,completed:0}),Ie({}),$({show:!0,points:10*t.length,action:"BULK_IMPORT"}),setTimeout(()=>Be(!1),3e3),[]})}catch(e){}},Xe=(e,t)=>{Re({isOpen:!0,imageSrc:e,imageAlt:t})};return e.jsxs("div",{className:"relative h-full overflow-hidden flex flex-col transition-colors duration-300",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 "+(L?"bg-gradient-to-br from-blue-950/20 via-indigo-950/10 to-purple-950/20":"bg-gradient-to-br from-blue-100/60 via-indigo-100/40 to-purple-100/60")}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 rounded-full blur-3xl animate-pulse "+(L?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20":"bg-gradient-to-r from-blue-500/15 to-cyan-500/15")}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 "+(L?"bg-gradient-to-r from-indigo-500/20 to-purple-500/20":"bg-gradient-to-r from-indigo-500/15 to-purple-500/15")}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-64 h-64 rounded-full blur-3xl animate-pulse delay-500 "+(L?"bg-gradient-to-r from-purple-500/15 to-pink-500/15":"bg-gradient-to-r from-purple-500/12 to-pink-500/12")}),e.jsx("div",{className:"absolute bottom-1/3 left-1/4 w-48 h-48 rounded-full blur-3xl animate-pulse delay-1500 "+(L?"bg-gradient-to-r from-cyan-500/15 to-blue-500/15":"bg-gradient-to-r from-cyan-500/12 to-blue-500/12")}),e.jsx("div",{className:`absolute top-20 left-10 w-32 h-32 border-2 rounded-2xl rotate-12 animate-float ${L?"border-blue-400/30 bg-transparent":"border-blue-400/25 bg-white/10"} backdrop-blur-sm`}),e.jsx("div",{className:"absolute top-40 right-20 w-24 h-24 rounded-full animate-float-delayed "+(L?"bg-gradient-to-br from-blue-500/20 to-indigo-500/20":"bg-gradient-to-br from-blue-500/15 to-indigo-500/15")}),e.jsx("div",{className:`absolute bottom-32 left-20 w-20 h-20 border-2 rounded-lg rotate-45 animate-float-slow ${L?"border-purple-400/30 bg-transparent":"border-purple-400/25 bg-white/10"} backdrop-blur-sm`}),e.jsx("div",{className:"absolute top-1/3 left-16 w-24 h-32 rounded-tl-3xl rounded-br-3xl animate-float delay-800 "+(L?"bg-gradient-to-r from-blue-400/20 to-cyan-400/20":"bg-gradient-to-r from-blue-400/15 to-cyan-400/15")}),e.jsx("div",{className:"absolute bottom-1/3 right-16 w-32 h-24 rounded-tr-3xl rounded-bl-3xl animate-float-delayed "+(L?"bg-gradient-to-r from-purple-400/20 to-indigo-400/20":"bg-gradient-to-r from-purple-400/15 to-indigo-400/15")}),e.jsx("div",{className:"absolute top-1/3 right-1/6 w-8 h-8 transform rotate-45 animate-float delay-900 "+(L?"bg-amber-400/25":"bg-amber-400/20"),style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),e.jsx("div",{className:"absolute bottom-2/5 left-1/8 w-6 h-6 transform -rotate-15 animate-float-slow delay-1100 "+(L?"bg-lime-400/25":"bg-lime-400/20"),style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"}}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-8 h-8 transform rotate-45 animate-float delay-1000 "+(L?"bg-cyan-400/20":"bg-cyan-400/15"),style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-12 h-12 transform -rotate-30 animate-float-delayed "+(L?"bg-rose-400/20":"bg-rose-400/15"),style:{clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"}}),e.jsx("div",{className:"absolute top-1/5 right-1/4 w-2 h-2 rounded-full animate-ping delay-500 "+(L?"bg-white/60":"bg-blue-300/70")}),e.jsx("div",{className:"absolute bottom-1/5 left-1/4 w-1 h-1 rounded-full animate-ping delay-1200 "+(L?"bg-yellow-300/80":"bg-yellow-300/70")}),e.jsx("div",{className:"absolute top-2/5 left-3/4 w-1.5 h-1.5 rounded-full animate-ping delay-800 "+(L?"bg-cyan-300/70":"bg-cyan-300/60")}),e.jsx("div",{className:"absolute bottom-2/5 right-3/4 w-2.5 h-2.5 rounded-full animate-ping delay-1800 "+(L?"bg-pink-300/60":"bg-pink-300/50")}),e.jsx("div",{className:"absolute inset-0",children:i.useMemo(()=>[...Array(15)].map((t,r)=>{const a=100*Math.random(),s=100*Math.random(),n=3*Math.random(),o=2+2*Math.random(),i=3*Math.random()+1;return e.jsx("div",{className:"absolute rounded-full animate-ping "+(L?"bg-blue-500/40":"bg-blue-500/30"),style:{left:`${a}%`,top:`${s}%`,width:`${i}px`,height:`${i}px`,animationDelay:`${n}s`,animationDuration:`${o}s`}},`particle-${r}`)}),[L])}),e.jsx("div",{className:"absolute inset-0 opacity-[0.03] dark:opacity-[0.05]",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, #3b82f6 1px, transparent 1px), \n                             radial-gradient(circle at 75% 75%, #6366f1 1px, transparent 1px)",backgroundSize:"60px 60px",backgroundPosition:"0 0, 30px 30px"}})}),e.jsx("div",{className:"absolute top-1/4 left-0 w-32 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent transform rotate-45 animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-1/3 right-0 w-40 h-px bg-gradient-to-r from-transparent via-purple-400/30 to-transparent transform -rotate-45 animate-pulse delay-2000"}),e.jsx("div",{className:"absolute top-2/3 left-0 w-24 h-px bg-gradient-to-r from-transparent via-cyan-400/30 to-transparent transform rotate-12 animate-pulse delay-500"}),e.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-2 border-t-2 rounded-tl-3xl "+(L?"border-blue-400/20":"border-blue-400/15")}),e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 border-r-2 border-t-2 rounded-tr-3xl "+(L?"border-purple-400/20":"border-purple-400/15")}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 border-l-2 border-b-2 rounded-bl-3xl "+(L?"border-cyan-400/20":"border-cyan-400/15")}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-2 border-b-2 rounded-br-3xl "+(L?"border-indigo-400/20":"border-indigo-400/15")})]}),e.jsx("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 px-6 py-4 flex-shrink-0 relative overflow-hidden shadow-lg transition-colors duration-300 z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:ye?`Importing Questions (${be+1}/${ve.total})`:R?"Edit Question":"Create New Question"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs md:text-sm mt-1 transition-colors duration-300",children:ye?`Question ${be+1} of ${ve.total} - ${ve.completed} completed`:R?"Update the question details below with modern tools":"Add a new question to your question bank with advanced features"}),ye&&e.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:(be+1)/ve.total*100+"%"}})})]}),e.jsx("div",{className:"flex flex-col md:flex-row w-full md:w-auto items-stretch md:items-center gap-2 md:gap-3",children:ye&&e.jsxs("button",{onClick:()=>{Te(!0)},className:"group relative bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105 flex items-center space-x-2 text-sm font-medium overflow-hidden w-full md:w-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600 to-red-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{children:"Cancel Import"})]})]})})]})}),X&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 sm:p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto relative",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:"Paste CSV to Fill Questions"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx("strong",{children:"Complete questions:"})," Section, Domain, Question Type, Passage Text, Question Text, A, B, C, D, Correct (A/B/C/D), Explanation (optional), Difficulty"]}),e.jsxs("p",{className:"text-sm text-purple-600 dark:text-purple-400 mb-2",children:[e.jsx("strong",{children:"Hidden questions:"})," Section, Domain, Question Type (only 3 fields) - auto-detected as drafts"]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-3",children:["💡 ",e.jsx("strong",{children:"Multi-question support:"})," Paste multiple questions by putting each question on a new line. You can import unlimited questions at once!"]}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-2 mb-2 text-base sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:6,value:ee,onChange:e=>te(e.target.value),placeholder:'Example complete question:\nMath,Algebra,Linear/Quadratic Equations,"A company manufactures boxes with length 3 inches more than width! height 2 inches less than width.","What are the dimensions?","Width: 3 in! Length: 6 in! Height: 1 in","Width: 4 in! Length: 7 in! Height: 2 in","Width: 5 in! Length: 8 in! Height: 3 in","Width: 2 in! Length: 5 in! Height: 0 in",B,"Let w = width. Then length = w + 3! height = w - 2.",Medium\n\nExample hidden questions (only 3 fields):\nMath,Algebra,Linear/Quadratic Equations\nReading and Writing,Information and Ideas,Words in Context\nMath,Geometry and Trigonometry,Circles\n\nMixed import (complete + hidden questions):\nMath,Algebra,Linear/Quadratic Equations,"Full passage text","Full question?","Choice A","Choice B","Choice C","Choice D",A,"Full explanation",Easy\nMath,Problem Solving and Data Analysis,Statistics\nReading and Writing,Standard English Conventions,Boundaries'}),re&&e.jsx("div",{className:"text-red-600 text-xs mb-2 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800 whitespace-pre-line",children:re}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500 text-sm w-full sm:w-auto",children:"Cancel"}),e.jsx("button",{onClick:()=>{ae("");try{const e=(e=>{const t=e.trim().split("\n").filter(e=>""!==e.trim()),r=[];for(let a=0;a<t.length;a++){const e=a+1,s=t[a].trim();if(!s)continue;let n=0,o=!1;for(let t=0;t<s.length;t++){const e=s[t];'"'===e?o=!o:","!==e||o||n++}if(n++,n<3){const t=s.length>50?s.substring(0,50)+"...":s;r.push(`Line ${e}: Insufficient fields (${n}). Expected 3 for hidden questions or 11+ for complete questions. Preview: "${t}"`)}else if(n>3&&n<11){const t=s.length>50?s.substring(0,50)+"...":s;r.push(`Line ${e}: Incomplete fields (${n}). Expected either 3 for hidden questions or 11+ for complete questions. Preview: "${t}"`)}else if(n>12){const t=s.length>50?s.substring(0,50)+"...":s;r.push(`Line ${e}: Too many fields (${n}). Maximum 12 fields allowed. Preview: "${t}"`)}}return r})(ee);if(e.length>0)return void ae(`CSV Format Issues:\n${e.join("\n")}`);const t=(e=>{var t;const r=((t=e)?t.replace(/!/g,","):t).trim().split("\n").filter(e=>""!==e.trim()),a=[],s=e=>{let t=0,r=!1;for(let a=0;a<e.length;a++){const s=e[a];'"'===s?r=!r:","!==s||r||t++}return t++,t};for(let o=0;o<r.length;o++){const e=o+1,t=r[o].trim();if(t)try{const e=Ke(t);a.push(e)}catch(n){const r=s(t);if(r<3){const a=t.length>100?t.substring(0,100)+"...":t;throw new Error(`Line ${e}: Insufficient question data. Found ${r} fields, expected 3 for hidden questions or 11+ for complete questions. Preview: "${a}"`)}if(r>3&&r<11){const a=t.length>100?t.substring(0,100)+"...":t;throw new Error(`Line ${e}: Incomplete question data. Found ${r} fields, expected either 3 for hidden questions or 11+ for complete questions. Preview: "${a}"`)}throw new Error(`Line ${e}: ${n.message}`)}}if(0===a.length)throw new Error("No valid questions found in CSV. Please check your format and ensure each line has all required fields.");return a})(ee);1===t.length?(O(t[0]),Z(!1),te("")):(pe(t),fe(0),O(t[0]),we(!0),je({total:t.length,completed:0}),Ie({}),Z(!1),te(""))}catch(e){ae(e.message)}},className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium w-full sm:w-auto",children:"Import Questions"})]})]})}),ke&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 sm:p-6 w-full max-w-md relative",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:"Import in Progress"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"You're currently importing questions. Please finish importing all questions before editing existing questions in your question bank."}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-4",children:"You can continue with the import or cancel it to return to normal editing mode."}),e.jsx("button",{onClick:()=>Ne(!1),className:"px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 text-sm font-medium w-full sm:w-auto",children:"Continue Import"})]})})}),Ce&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 sm:p-6 w-full max-w-md relative",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:"Cancel Import?"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Are you sure you want to cancel the import? All questions you've reviewed (",ve.completed," questions) will be discarded and not added to your question bank."]}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mb-4",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{onClick:()=>Te(!1),className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500 text-sm font-medium w-full sm:w-auto",children:"Continue Import"}),e.jsx("button",{onClick:()=>{we(!1),pe([]),fe(0),je({total:0,completed:0}),Ae([]),Ie({}),Te(!1),O({section:u.READING_WRITING,domain:"",questionType:"",passageText:"",passageImage:null,questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM})},className:"px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium w-full sm:w-auto",children:"Cancel Import"})]})]})})}),le&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 sm:p-6 w-full max-w-md relative",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:"Export Questions"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Choose your preferred export format for ",Ve.filter(e=>!e.hidden).length," visible questions."]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-2",children:"Hidden questions will not be included in the export."}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-6",children:"💡 CSV format: Section, Domain, Question Type, Passage Text, Question Text, A, B, C, D, Correct (A/B/C/D), Explanation, Difficulty. Images are embedded in passage text with special markers. Commas automatically converted to exclamation marks."}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("button",{onClick:async()=>{de(!1),await(async()=>{const e=Ve.filter(e=>!e.hidden);ne(!0),ie(!1);try{const t=await v(e,"Thinklytics_SAT_Question_Bank");if(!t.success)throw new Error(t.error);ne(!1),ie(!0),setTimeout(()=>ie(!1),3e3)}catch(t){alert(`Error generating PDF: ${t.message}`),ne(!1),ie(!1)}})()},disabled:se,className:"w-full px-6 py-3 rounded-lg bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 transition-all duration-300 hover:shadow-lg font-medium flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Export as PDF"})]}),e.jsx("button",{onClick:()=>{(async()=>{const e=Ve.filter(e=>!e.hidden);if(0===e.length)return void alert("No visible questions to copy!");const t=e=>{if(null==e)return"";let t=String(e).replace(/,/g,"!");return t=t.replace(/\r?\n/g," ").replace(/\s+/g," ").trim(),t=t.replace(/"/g,'""'),t=`"${t}"`,t},r=e.map(e=>{let r=e.passageText||"";if(e.passageImage){const t="[IMAGE_DATA]",a="[/IMAGE_DATA]";r=r.trim()?`${r} ${t}${e.passageImage}${a}`:`${t}${e.passageImage}${a}`}let a=e.explanation||"";if(e.explanationImage){const t="[IMAGE_DATA]",r="[/IMAGE_DATA]";a=a.trim()?`${a} ${t}${e.explanationImage}${r}`:`${t}${e.explanationImage}${r}`}return[t(e.section),t(e.domain),t(e.questionType),t(r),t(e.questionText||""),t(e.answerChoices?.A||""),t(e.answerChoices?.B||""),t(e.answerChoices?.C||""),t(e.answerChoices?.D||""),t(e.correctAnswer||"A"),t(a),t(e.difficulty||"Medium")].join(",")}).join("\n");try{await navigator.clipboard.writeText(r),ue(!0),setTimeout(()=>{ue(!1),de(!1)},1500)}catch(a){const e=document.createElement("textarea");e.value=r,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),ue(!0),setTimeout(()=>{ue(!1),de(!1)},1500)}catch(s){alert("Failed to copy CSV to clipboard. Please try again.")}document.body.removeChild(e)}})()},disabled:se||ce,className:"w-full px-6 py-3 rounded-lg transition-all duration-300 hover:shadow-lg font-medium flex items-center justify-center space-x-2 "+(ce?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700"),children:ce?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),e.jsx("span",{children:"Copy CSV"})]})}),e.jsx("button",{onClick:()=>de(!1),className:"w-full px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors font-medium",children:"Cancel"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-auto relative z-10",children:e.jsx("div",{className:"w-full px-3 sm:px-6 py-4 lg:h-full pb-20 sm:pb-6",children:e.jsx("div",{className:"max-w-7xl mx-auto lg:h-full",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:h-full",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 flex flex-col lg:h-full overflow-hidden hover:shadow-xl transition-all duration-300 relative min-h-[400px] md:min-h-[500px]",children:[e.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200/50 dark:border-gray-700/50 flex-shrink-0 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Question Details"}),ye&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["Question ",be+1," of ",ve.total]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[ve.completed," completed"]})]})]})}),e.jsxs("form",{onSubmit:_e,className:"flex flex-col lg:h-full overflow-hidden",children:[e.jsxs("div",{className:"p-3 sm:p-4 space-y-3 flex-1 lg:overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 transition-colors duration-300",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative flex flex-wrap gap-2 p-2 rounded-xl shadow-inner transition-colors duration-300 "+(K.section?"bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 border-2 border-red-300 dark:border-red-600":"bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600"),children:Object.values(u).map(t=>e.jsxs("button",{type:"button",onClick:()=>He("section",t),className:"relative px-3 sm:px-5 py-2 text-xs sm:text-sm font-medium rounded-lg transition-all duration-300 overflow-hidden "+(z.section===t?"text-white shadow-lg transform scale-105":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50 hover:shadow-md"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#22adff] to-[#3ab6ff] rounded-lg transition-all duration-500 ease-out "+(z.section===t?"opacity-100":"opacity-0")}),e.jsx("span",{className:"relative z-10",children:t})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:["Domain ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:z.domain,onChange:e=>He("domain",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 text-base sm:text-sm transition-colors duration-300 "+(K.domain?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),children:[e.jsx("option",{value:"",children:"Select Domain"}),h(z.section).map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:["Question Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:z.questionType,onChange:e=>He("questionType",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 text-base sm:text-sm transition-colors duration-300 "+(K.questionType?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),children:[e.jsx("option",{value:"",children:"Select Question Type"}),(z.domain?p(z.section,z.domain):b(z.section)).map(t=>{const r=t.split(" "),a=z.section===u.MATH&&r.length>5?`${r.slice(0,5).join(" ")} ...`:t;return e.jsx("option",{value:t,children:a},t)})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:["Passage Text ",e.jsx("span",{className:"text-red-500",children:"*"})]}),z.passageImage&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Passage Image"}),e.jsx("button",{type:"button",onClick:()=>{O(e=>({...e,passageImage:null}))},className:"text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:underline",children:"Remove Image"})]}),e.jsx("img",{src:z.passageImage,alt:"Passage",className:"max-h-48 w-auto rounded shadow-sm border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-90 transition-opacity duration-200",onClick:()=>Xe(z.passageImage,"Passage")})]}),e.jsx("textarea",{value:z.passageText,onChange:e=>He("passageText",e.target.value),onPaste:e=>{const t=e.clipboardData?.items;if(t)for(let r=0;r<t.length;r++){const a=t[r];if(-1!==a.type.indexOf("image")){const t=a.getAsFile(),r=new FileReader;return r.onload=e=>{O(t=>({...t,passageImage:e.target.result}))},r.readAsDataURL(t),void e.preventDefault()}}},placeholder:z.passageImage?"Add text to accompany the image above... (or paste another image)":"Enter the reading passage or problem context... (or paste an image)",rows:z.passageImage?2:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 resize-vertical text-base sm:text-sm transition-colors duration-300 "+(K.passageText?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 You can paste images (Ctrl+V) and add text to create rich passages with both visual and textual content."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:["Question ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:z.questionText,onChange:e=>He("questionText",e.target.value),placeholder:"Enter the specific question being asked...",rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 resize-vertical text-base sm:text-sm transition-colors duration-300 "+(K.questionText?"border-red-500 focus:ring-red-500 focus:border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300",children:["Answer Choices ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(t=>e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"border-2 rounded-lg p-4 transition-colors "+(K[`answerChoice_${t}`]?"border-red-500 bg-red-50 dark:bg-red-900/20":z.correctAnswer===t?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 bg-white dark:bg-gray-700"),children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"radio",id:`correct-${t}`,name:"correctAnswer",value:t,checked:z.correctAnswer===t,onChange:e=>He("correctAnswer",e.target.value),className:"w-4 h-4 text-green-600 border-gray-300 dark:border-gray-600 focus:ring-green-500 dark:bg-gray-700"}),e.jsxs("label",{htmlFor:`correct-${t}`,className:"ml-2 text-sm font-medium text-gray-900 dark:text-white transition-colors duration-300 cursor-pointer hover:text-green-600 dark:hover:text-green-400",children:["Choice ",t," ",z.correctAnswer===t&&e.jsx("span",{className:"text-green-600 text-xs",children:"(Correct)"})]})]}),e.jsx("input",{type:"text",value:z.answerChoices[t],onChange:e=>((e,t)=>{O(r=>({...r,answerChoices:{...r.answerChoices,[e]:t}}));const r=`answerChoice_${e}`;K[r]&&J(e=>({...e,[r]:!1}))})(t,e.target.value),placeholder:`Enter answer choice ${t}...`,className:"w-full px-3 py-2.5 border rounded-md focus:ring-2 text-base transition-colors duration-300 "+(K[`answerChoice_${t}`]?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white")})]})},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Explanation (Optional)"}),z.explanationImage&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Explanation Image"}),e.jsx("button",{type:"button",onClick:()=>{O(e=>({...e,explanationImage:null}))},className:"text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:underline",children:"Remove Image"})]}),e.jsx("img",{src:z.explanationImage,alt:"Explanation",className:"max-h-48 w-auto rounded shadow-sm border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-90 transition-opacity duration-200",onClick:()=>Xe(z.explanationImage,"Explanation")})]}),e.jsx("textarea",{value:z.explanation,onChange:e=>He("explanation",e.target.value),onPaste:e=>{const t=e.clipboardData?.items;if(t)for(let r=0;r<t.length;r++){const a=t[r];if(-1!==a.type.indexOf("image")){const t=a.getAsFile(),r=new FileReader;return r.onload=e=>{O(t=>({...t,explanationImage:e.target.result}))},r.readAsDataURL(t),void e.preventDefault()}}},placeholder:z.explanationImage?"Add text to accompany the explanation image above... (or paste another image)":"Provide an explanation for the correct answer... (or paste an image)",rows:z.explanationImage?2:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-vertical text-base sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-colors duration-300"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 You can paste images (Ctrl+V) and add text to create rich explanations with both visual and textual content."})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 transition-colors duration-300",children:"Difficulty Level"}),e.jsx("select",{value:z.difficulty,onChange:e=>He("difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-base sm:text-sm transition-colors duration-300",children:Object.values(c).map(t=>e.jsx("option",{value:t,children:t},t))})]})})]})]}),e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2",children:[R&&e.jsx("button",{type:"button",onClick:()=>{F(null),_(null),Qe(-1),O({section:u.READING_WRITING,domain:"",questionType:"",passageText:"",passageImage:null,questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM})},className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors text-sm font-medium",children:"Cancel"}),ye&&e.jsxs("button",{type:"button",onClick:()=>{if(!ye)return;Ie(e=>({...e,[be]:{...z}}));const e=be-1;if(e>=0){Ae(e=>e.slice(0,-1)),je(e=>({...e,completed:Math.max(0,e.completed-1)})),fe(e);const t=qe[e]||he[e];O(t)}},disabled:0===be,className:"px-4 py-2 rounded-lg transition-colors text-sm font-medium flex items-center space-x-2 "+(0===be?"bg-gray-300 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-200 dark:bg-blue-700 text-blue-800 dark:text-blue-200 hover:bg-blue-300 dark:hover:bg-blue-600"),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Previous"})]}),e.jsx("div",{className:R||ye?"":"sm:ml-auto",children:R&&!(()=>{if(!R||!H)return!1;const e=["section","domain","questionType","passageText","passageImage","questionText","correctAnswer","explanation","explanationImage","difficulty"];for(let t of e)if(z[t]!==H[t])return!0;for(let t of["A","B","C","D"])if(z.answerChoices[t]!==H.answerChoices[t])return!0;return!1})()?e.jsxs(I,{type:"button",variant:"danger",successMessage:"Question Deleted!",onClick:async()=>{await(async e=>{n(e),Q&&(Q.currentTime=0,Q.play().catch(e=>{})),Fe("DELETE_QUESTION").catch(e=>{})})(R),F(null),_(null),Qe(-1),O({section:u.READING_WRITING,domain:"",questionType:"",passageText:"",passageImage:null,questionText:"",answerChoices:{A:"",B:"",C:"",D:""},correctAnswer:"A",explanation:"",explanationImage:null,difficulty:c.MEDIUM})},className:"text-sm w-full sm:w-auto",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1H8a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{children:"Delete Question"})]}):ye?be===he.length-1?e.jsx(I,{type:"button",variant:"success",successMessage:"Import Complete!",onClick:Je,className:"text-sm flex items-center space-x-2 w-full sm:w-auto",children:e.jsx("span",{children:"Finish Import"})}):e.jsxs("button",{type:"button",onClick:Je,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors text-sm flex items-center space-x-2 w-full sm:w-auto",children:[e.jsx("span",{children:"Next Question"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):e.jsx(I,{type:"button",variant:R?"primary":"success",successMessage:()=>R?"Updated!":"Added!",onClick:_e,className:"text-sm w-full sm:w-auto",children:e.jsx("span",{children:R?"Update Question":"Add Question"})})})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col lg:h-full overflow-hidden transition-colors duration-300 min-h-[400px] md:min-h-[500px]",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Question Bank"}),e.jsxs("div",{className:"flex items-center gap-3 text-sm transition-colors duration-300",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:ye?"Import in progress - editing disabled":(()=>{const e=Ve.filter(e=>!e.hidden);return Ve.filter(e=>e.hidden),`${e.length} questions`})()}),!ye&&(()=>{const t=Ve.filter(e=>e.hidden);return t.length>0?e.jsxs("p",{className:"text-gray-500 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs",children:[t.length," hidden"]}):null})()]})]}),!ye&&Ve.length>0&&e.jsx("button",{onClick:()=>{De(!Le),Le&&Me(new Set)},disabled:ye,className:`px-4 py-2 text-sm rounded-lg transition-colors font-medium ${Le?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-800/40 border border-purple-200 dark:border-purple-700":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"} ${ye?"opacity-50 cursor-not-allowed":""}`,children:Le?"Exit Selection":"Select Multiple"})]}),!ye&&Le&&Ve.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Bulk Selection Mode"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>{const e=Ve.map(e=>e.id);Me(new Set(e))},className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800/40 transition-colors font-medium",children:"Select All"}),e.jsx("button",{onClick:()=>{Me(new Set)},className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:"Clear All"}),Ee.size>0&&e.jsxs("button",{onClick:async()=>{if(0===Ee.size)return;if(window.confirm(`Are you sure you want to delete ${Ee.size} selected question${Ee.size>1?"s":""}? This action cannot be undone.`))try{const t=Array.from(Ee),r=t.length;if(Q&&(Q.currentTime=0,Q.play().catch(e=>{})),o)o(t);else for(const e of t)n(e);Me(new Set),De(!1);const a=k.DELETE_QUESTION*r;if($({show:!0,points:a,action:"DELETE_QUESTION"}),E?.id)for(let s=0;s<r;s++)try{N(E.id,"DELETE_QUESTION").catch(e=>{})}catch(e){}}catch(t){alert("Error deleting questions. Please try again.")}},className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800/40 transition-colors font-medium",children:["Delete Selected (",Ee.size,")"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:G,onChange:e=>Y(e.target.value),disabled:ye,placeholder:"Search questions, sections, domains, or type 'hidden'...",className:"w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-base sm:text-sm transition-colors duration-300 "+(ye?"opacity-50 cursor-not-allowed":"")}),e.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-4.35-4.35M4 10a6 6 0 1112 0 6 6 0 01-12 0z"})})]})]})}),e.jsx("div",{className:"p-3 sm:p-4 flex-1 lg:overflow-hidden",children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-1 transition-colors duration-300",children:"Loading questions..."})]}):0===Ve.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-3 transition-colors duration-300",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-1 transition-colors duration-300",children:"No questions found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm transition-colors duration-300",children:"Create your first question using the form."})]}):e.jsxs("div",{className:"lg:h-full relative",children:[e.jsx(q,{items:Ge,onItemSelect:(e,t)=>{if(ye)return void Ne(!0);const r=Ve[t];Le?Ye(r.id):((e,t=-1)=>{F(e.id),Qe(t);const r={section:e.section,domain:e.domain,questionType:e.questionType,passageText:e.passageText,passageImage:e.passageImage||null,questionText:e.questionText,answerChoices:e.answerChoices,correctAnswer:e.correctAnswer,explanation:e.explanation,explanationImage:e.explanationImage||null,difficulty:e.difficulty};O(r),_(r)})(r,t)},showGradients:!0,enableArrowNavigation:!ye,displayScrollbar:!0,disabled:ye,initialSelectedIndex:Pe,selectedItems:Le?new Set(Ve.map((e,t)=>Ee.has(e.id)?t:-1).filter(e=>-1!==e)):new Set}),ye&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-900/90 flex items-center justify-center rounded-lg z-10 border-2 border-yellow-300 dark:border-yellow-600",children:e.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg border border-yellow-200 dark:border-yellow-700",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Import in Progress"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Question bank editing disabled"})]})})]})}),Ve.length>0&&e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 flex-shrink-0 transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-sm gap-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300 text-xs sm:text-sm",children:Le?`Click questions to select/deselect (${Ee.size} selected)`:"Click any question to edit"}),!Le&&!R&&!ye&&e.jsxs("div",{className:"relative self-end sm:self-auto",ref:xe,children:[e.jsx("button",{onClick:()=>ge(!me),className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",title:"More actions",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),me&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-1 w-40 sm:w-48 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[e.jsxs("button",{onClick:()=>{Z(!0),te(""),ae(""),ge(!1)},className:"w-full px-3 sm:px-4 py-2 text-left text-xs sm:text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 flex items-center gap-2 sm:gap-3",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"truncate",children:"Paste CSV"})]}),e.jsxs("button",{onClick:()=>{(async()=>{if(!A||0===A.length)return;A.map(e=>e.id);const e=[],t=new Set;if(A.forEach(r=>{t.has(r.id)?e.push(r.id):t.add(r.id)}),0===e.length)return void alert("No duplicate questions found!");window.confirm(`Found ${e.length} duplicate questions. Do you want to remove them? This action cannot be undone.`)&&(o(e),alert(`Successfully removed ${e.length} duplicate questions!`))})(),ge(!1)},className:"w-full px-3 sm:px-4 py-2 text-left text-xs sm:text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 flex items-center gap-2 sm:gap-3",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"truncate",children:"Clean Duplicates"})]})]})]})]})})]})]})})})}),D.show&&e.jsx(y,{pointsAwarded:D.points,actionType:D.action,onComplete:()=>{$({show:!1,points:0,action:""})}}),e.jsx(w,{isOpen:Oe.isOpen,imageSrc:Oe.imageSrc,imageAlt:Oe.imageAlt,onClose:()=>{Re({isOpen:!1,imageSrc:"",imageAlt:""})}})]})};export{L as default};
